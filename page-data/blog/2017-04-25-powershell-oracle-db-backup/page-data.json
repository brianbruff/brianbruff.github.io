{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2017-04-25-powershell-oracle-db-backup/","result":{"data":{"markdownRemark":{"html":"<p>Hi all,</p>\n<p>I thought I would share with you this quick Powershell script I created to Export an oracle database, 7Zip it and then upload it to AmazonS3</p>\n<h2>Export.ps1</h2>\n<p>param([String]$dumpname=(get-date -format dd-MM-yyyy)) Set-Alias sz \"$env:ProgramFiles\\7-Zip\\7z.exe\" expdp / DIRECTORY=dmpdir DUMPFILE=$dumpname.dmp LOGFILE=$dumpname.log sz a -mx \"$dumpname.7z\" \"$dumpname.*\" Write-S3Object -bucket \"company-ps\" -profilename brian.keating  -file \"$dumpname.7z\" -key \"customer/dbdumps/$dumpname.7z\" remove-item \"$dumpname.dmp\" remove-item \"$dumpname.log\"</p>\n<h2>How it works:</h2>\n<p>It uses the current date as the dumpname variable (unless specified as a parameter to the script)</p>\n<p>It uses Oracle DbPump to export the database (assumes 7-Zip is installed in %\\program files\\)</p>\n<p>It then writes the 7z file to AWS S3</p>\n<p>Finally it removes the dump and log files.</p>\n<h3>AWS Powershell</h3>\n<p>ASW Powershell is installed on this server and I have already set a profile “brian.keating” with the following command.</p>\n<p>set-awscredentials –AccessKey  –SecretKey  -storeAs brian.keating</p>\n<h2>Trivia</h2>\n<p>The server in this case is running in AWS, the 7zipped db is about 4Gb, and it uploads to S3 in about 30seconds (nice!)</p>","frontmatter":{"title":"Powershell Oracle Db Backup","date":"April 25, 2017"}}},"pageContext":{"slug":"/blog/2017-04-25-powershell-oracle-db-backup/"}},"staticQueryHashes":["2326376460","63159454"],"slicesMap":{}}