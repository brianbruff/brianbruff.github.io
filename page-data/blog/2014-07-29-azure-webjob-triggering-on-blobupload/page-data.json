{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2014-07-29-azure-webjob-triggering-on-blobupload/","result":{"data":{"markdownRemark":{"html":"<p>Tonight I’m going to follow up on my previous post where I promised to show you how to react on somone/something uploading a Blob.</p>\n<p><strong>Please read</strong><a href=\"http://azure.microsoft.com/blog/2014/06/18/announcing-the-0-3-0-beta-preview-of-microsoft-azure-webjobs-sdk/\" title=\"http://azure.microsoft.com/blog/2014/06/18/announcing-the-0-3-0-beta-preview-of-microsoft-azure-webjobs-sdk/\"><strong>http://azure.microsoft.com/blog/2014/06/18/announcing-the-0-3-0-beta-preview-of-microsoft-azure-webjobs-sdk/</strong></a><strong>as there is a lot of old information lying about on the web regarding v0-2-0 which will not work in v0-3-0,</strong><em>I’m not ashamed to say it’s now the early hours of the morning before I’ve finally managed to get this working as most of the documentation I was reading was v0-2-0.</em></p>\n<p>Let’s get started by creating a console application.</p>\n<h2>Nuget</h2>\n<p><img src=\"/images//images/image_thumb_329.png\" alt=\"\"></p>\n<h2>Code</h2>\n<p>In this code you can see that I’m just appending worked… to the input file, the important parts to consider are the BlobTrigger and Blob attributes, the trigger is the item that will start to process when a blobupdates on the reuters-input container, the BlobAttribute is the output and the reuters-gdmx is the identified container for same.</p>\n<p><img src=\"/images//images/image_thumb_336.png\" alt=\"\"></p>\n<p>There are a few options with the job, schedule/on demand/continuous..</p>\n<p><img src=\"/images//images/image_thumb_337.png\" alt=\"\"></p>\n<p>For the automatic trigger I’m setting the job to be On Demand, however I know in the current version of webjobs, that ondemand for blobs are polled every 10 minutes (I hope can be more real-time once WebJobs exit preview).</p>\n<p><img src=\"/images//images/image_thumb_332.png\" alt=\"\"></p>\n<p><img src=\"/images//images/image_thumb_333.png\" alt=\"\"></p>\n<h2>Connection Strings</h2>\n<p>You need to add two connections string to your blob storage account (get the connection string with visual studio Azure explorer), I’ve set both to the same storage account. <em>The last two are from v0-3-0.</em></p>\n<p><img src=\"/images//images/image_thumb_342.png\" alt=\"\"></p>\n<h2>Test</h2>\n<p>I’m going to use the AzureStorage explorer to upload a file, once this file gets uploaded the WebJob will run and create the associated blob in reuters-gdmx</p>\n<p><img src=\"/images//images/image_thumb_335.png\" alt=\"\"></p>\n<p><img src=\"/images//images/image_thumb_339.png\" alt=\"\"></p>\n<p><img src=\"/images//images/image_thumb_340.png\" alt=\"\"></p>\n<h2>Output</h2>\n<p>Here you can see the result of the WebJob (appending worked….)</p>\n<p><img src=\"/images//images/image_thumb_341.png\" alt=\"\"></p>","frontmatter":{"title":"Azure WebJob triggering on BlobUpload","date":"July 29, 2014"}}},"pageContext":{"slug":"/blog/2014-07-29-azure-webjob-triggering-on-blobupload/"}},"staticQueryHashes":["2326376460","63159454"],"slicesMap":{}}