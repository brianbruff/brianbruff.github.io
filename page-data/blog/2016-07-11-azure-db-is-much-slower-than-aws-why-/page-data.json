{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2016-07-11-azure-db-is-much-slower-than-aws-why-/","result":{"data":{"markdownRemark":{"html":"<p>This is a rather unusual post for me, while I’ve gone to the trouble of getting certified on both Azure and AWS platforms and try to make my posts on the same as unbiased as possible, the fact is that I’m pro Azure, and always have been, perhaps it’s because I’ve grown up on Microsoft Stacks, perhaps it’s because other platforms offer such a myriad of options that’s it not only hard to pick some, but getting the to work cohesively is beyond painful.</p>\n<p>Whether I remain pro Azure is at a tipping point as it appears I’m struggling to get Azure to offer the same performance when it comes to relational databases ( both with Oracle and Sql Server). Let me be clear that I don’t have all the answers for what I’m about to present, I have some ideas sure, but this post will not answer them, I simply intent to present a few scenarios with various applications that I’ve attempted to lift and shift to the cloud and why in a near like for like comparison with similar infrastructure with AWS, AWS is much much faster, in fact it’s near 2x faster!</p>\n<h3>Use cases</h3>\n<p>The following 3 scenarios behaved much better on AWS than Azure, we’re going to focus on 1 &#x26; 2 below and ignore the fact that the general responsiveness of the applications using Azure database we much worse (because we didn’t benchmark any of them).</p>\n<ul>\n<li>Scenario 1: Writing 500MB raw numeric to DB in 5 records</li>\n<li>Scenario 2: Writing 1MB raw data to database</li>\n<li>Scenario 3: General responsiveness</li>\n</ul>\n<h4>Scenario 1</h4>\n<p>The database of choice for this scenario was Oracle Standard Edition.</p>\n<p>Hardware Platforms</p>\n<h5>Laptop</h5>\n<p>Dual core hyper treaded i7 mobile chip. 2.9GHZ<br>\n16GB Ram<br>\nLocal SSD ScanDisk, approx 90k IOPS</p>\n<h5>Azure</h5>\n<p>4 Core Xeon 2.4GHZ<br>\n14GB Ram<br>\n20K premium disks<br>\n12,8K IOPS throttle</p>\n<h5>AWS</h5>\n<p>4 Core Xeon, 2.9GHZ<br>\n16GB RAM<br>\n20k provisioned I/O<br>\nUnadvertised throttling</p>\n<h5>RESULTS</h5>\n<p><img src=\"/images/./image.axd?picture=image_thumb_434.png\" alt=\"\"></p>\n<h6></h6>\n<p>TODO CHANGE NAME<br>\nazure<br>\nProcessed 1387264 pages for database 'dbEonDev', file 'dbEonDev_Data' on file 1.<br>\nProcessed 10 pages for database 'dbEonDev', file 'dbEonDev_Log' on file 1.<br>\nBACKUP DATABASE successfully processed 1387274 pages in 42.542 seconds (254.761 MB/sec).</p>\n<p>local Processed 1427504 pages for database 'dbEonDev', file 'dbEonDev_Data' on file 1.<br>\nProcessed 8 pages for database 'dbEonDev', file 'dbEonDev_Log' on file 1.<br>\nBACKUP DATABASE successfully processed 1427512 pages in 28.870 seconds (386.298 MB/sec).<br>\nec2 Processed 1339168 pages for database 'dbEonDev', file 'dbEonDev_Data' on file 1.<br>\nProcessed 2 pages for database 'dbEonDev', file 'dbEonDev_Log' on file 1.<br>\nBACKUP DATABASE successfully processed 1339170 pages in 86.767 seconds (120.578 MB/sec).<br>\n<img src=\"/images/./image.axd?picture=image_thumb_427.png\" alt=\"\"></p>\n<h3>Azure</h3>\n<p><img src=\"/images/./image.axd?picture=image_thumb_428.png\" alt=\"\"></p>\n<p>8k IOPS, on all workers</p>\n<p>All workers:</p>\n<p><img src=\"/images/./image.axd?picture=image_thumb_429.png\" alt=\"\"></p>\n<p>One Worker, started out with 80k IOPS, degrading to 14k over I minute run</p>\n<p><img src=\"/images/./image.axd?picture=image_thumb_430.png\" alt=\"\"></p>\n<p>Azure premium</p>\n<p><img src=\"/images/./image.axd?picture=image_thumb_431.png\" alt=\"\"></p>\n<p>Attached 6 disks, each 5k, for a total of 30k IOPS RAID0</p>\n<p><img src=\"/images/./image.axd?picture=image_thumb_432.png\" alt=\"\"></p>\n<h3></h3>\n<h3>AWS</h3>\n<p>Provisioned 20k IOPS, getting 13.5K sustained</p>\n<p><img src=\"/images/./image.axd?picture=image_thumb_433.png\" alt=\"\"></p>\n<p>C: Drive SSD (1TB 3k IOPS drive)</p>\n<p>Costs</p>","frontmatter":{"title":"Azure DB is much slower than AWS, why?","date":"July 11, 2016"}}},"pageContext":{"slug":"/blog/2016-07-11-azure-db-is-much-slower-than-aws-why-/"}},"staticQueryHashes":["2326376460","63159454"],"slicesMap":{}}