{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2013-04-22-file-upload-mcv4-web-api-knockout-js/","result":{"data":{"markdownRemark":{"html":"<p>I wish to follow up on my previous post <a href=\"/post/2012/04/04/Uploading-a-file-in-MVC4-C5-NET-45.aspx\">Uploading a file in MVC4 C#5 .NET 4.5</a></p>\n<p>I promised a few things here, an Ajax client, WinRT, iOs, Droid, This post addresses the ajax upload.</p>\n<p>First some background, I’m working on an expense tracking system at the moment, the core technologies involved in this Single Page Application are:</p>\n<ul>\n<li>ASP MVC4 WebApi</li>\n<li>Html5 SPA</li>\n<li>Knockout.js</li>\n</ul>\n<p>A fundamental part of this system is the ability to upload receipts.<br>\n<img src=\"/images/./image.axd?picture=image_thumb_255.png\" alt=\"\"></p>\n<p>When the user browses to an image file, it gets converted to base64 and uploaded via a MVC4 Api controller.</p>\n<p>Here are the important parts:</p>\n<h2>Html</h2>\n<p><img src=\"/images/./image.axd?picture=image_thumb_256.png\" alt=\"\"></p>\n<p>First we create an image where we can display either the previously selected image or the newly selected image.<br>\nWe only display this image if it’s in the javascript model.</p>\n<p>Secondly we bind the html5 input file with a knockout binding.</p>\n<h2>Javascript</h2>\n<h3>Model</h3>\n<p><img src=\"/images/./image.axd?picture=image_thumb_257.png\" alt=\"\"></p>\n<p>The important parts are the image and imageType properties, there also exists a computed property that joins these two so it can be displayed in an image tag. The reason i keep these separated is that I can’t post the source as is without further encoding.</p>\n<h3>Knockout Bindings</h3>\n<p>In knockout.js you are not limited to the built in bindings like, click and value, you can create your own,<br>\nI’ve taken <a href=\"https://github.com/khayrov/khayrov.github.com/blob/master/jsfiddle/knockout-fileapi/ko_file.js\">https://github.com/khayrov/khayrov.github.com/blob/master/jsfiddle/knockout-fileapi/ko_file.js</a> as my start point, this pretty much does what I want, however I made a slight tweak in that i wanted base64. (basically because I’ve written some of the objective-C iOS app already and didn’t fancy changing it).</p>\n<p><img src=\"/images/./image.axd?picture=image_thumb_258.png\" alt=\"\"></p>\n<h2>WebApi</h2>\n<p><img src=\"/images/./image.axd?picture=image_thumb_259.png\" alt=\"\"></p>\n<h4>ExpenseDto</h4>\n<p><img src=\"/images/./image.axd?picture=image_thumb_260.png\" alt=\"\"></p>\n<p>All source can be viewed @ <a href=\"https://github.com/brianbruff/Expenses\">https://github.com/brianbruff/Expenses</a></p>","frontmatter":{"title":"File Upload MCV4 Web API, Knockout.js","date":"April 22, 2013"}}},"pageContext":{"slug":"/blog/2013-04-22-file-upload-mcv4-web-api-knockout-js/"}},"staticQueryHashes":["2326376460","63159454"],"slicesMap":{}}